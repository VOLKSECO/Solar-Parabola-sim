<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulation Parabole Solaire</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Simulation de Chauffage Solaire</h1>
        
        <!-- Schéma de l'installation -->
        <div class="schema">
            <h2>Comment ça marche ?</h2>
            <img src="./sources/schema.svg" alt="Schéma Installation" class="schema-img">
            <p>Le soleil envoie des rayons, la parabole les concentre, et l'eau chauffe dans la casserole.</p>
        </div>

        <!-- Modules (vcards) -->
        <div class="modules">
            <div class="vcard" id="soleil-vcard">
                <img src="./sources/soleil.svg" alt="Soleil" class="module-img">
                <h3>Soleil</h3>
                <div class="params">
                    <p>Puissance du soleil : <span id="G-display">800</span> W/m²</p>
                </div>
                <div class="inputs" id="soleil-inputs" style="display: none;">
                    <label>
                        Radiation solaire (W/m²): 
                        <input type="number" id="G" value="800">
                        <span class="explanation">Force des rayons solaires.</span>
                    </label>
                </div>
                <button class="edit-btn" onclick="toggleEdit('soleil')">Modifier</button>
            </div>
            <div class="vcard" id="parabole-vcard">
                <img src="./sources/parabole.svg" alt="Parabole" class="module-img">
                <h3>Parabole</h3>
                <div class="params">
                    <p>Taille : <span id="D-display">2</span> m</p>
                    <p>Efficacité : <span id="eta_opt-display">0.9</span></p>
                </div>
                <div class="inputs" id="parabole-inputs" style="display: none;">
                    <label>
                        Diamètre (m): 
                        <input type="number" id="D" value="2" step="0.1">
                        <span class="explanation">Taille de la parabole.</span>
                    </label>
                    <label>
                        Efficacité optique: 
                        <input type="number" id="eta_opt" value="0.9" step="0.01">
                        <span class="explanation">Capacité à réfléchir les rayons.</span>
                    </label>
                </div>
                <button class="edit-btn" onclick="toggleEdit('parabole')">Modifier</button>
            </div>
            <div class="vcard" id="casserole-vcard">
                <img src="./sources/casserole.svg" alt="Casserole" class="module-img">
                <h3>Casserole d'eau</h3>
                <div class="params">
                    <p>Volume : <span id="V-display">5</span> L</p>
                    <p>Température initiale : <span id="T_init-display">20</span> °C</p>
                    <p>Température extérieure : <span id="T_ext-display">20</span> °C</p>
                    <p>Efficacité transfert : <span id="eta_trans-display">0.8</span></p>
                    <p>Pertes : <span id="k_pertes-display">5</span> W/°C</p>
                </div>
                <div class="inputs" id="casserole-inputs" style="display: none;">
                    <label>
                        Volume (L): 
                        <input type="number" id="V" value="5" step="0.1">
                        <span class="explanation">Quantité d’eau.</span>
                    </label>
                    <label>
                        Température initiale (°C): 
                        <input type="number" id="T_init" value="20">
                        <span class="explanation">Température de l’eau au départ.</span>
                    </label>
                    <label>
                        Température extérieure (°C): 
                        <input type="number" id="T_ext" value="20">
                        <span class="explanation">Température autour.</span>
                    </label>
                    <label>
                        Efficacité transfert: 
                        <input type="number" id="eta_trans" value="0.8" step="0.01">
                        <span class="explanation">Chaleur atteignant l’eau.</span>
                    </label>
                    <label>
                        Coefficient pertes (W/°C): 
                        <input type="number" id="k_pertes" value="5" step="0.1">
                        <span class="explanation">Chaleur perdue.</span>
                    </label>
                </div>
                <button class="edit-btn" onclick="toggleEdit('casserole')">Modifier</button>
            </div>
        </div>

        <!-- Bouton de simulation -->
        <button class="simulate-btn" onclick="runSimulation()">Lancer Simulation</button>

        <!-- Résultats -->
        <div class="output-section">
            <h2>Résultats</h2>
            <p id="result">Temps pour atteindre 100°C : -</p>
            <div class="charts">
                <div class="chart-container">
                    <h3>Température de l'eau</h3>
                    <canvas id="temperatureChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Énergie</h3>
                    <canvas id="energyChart"></canvas>
                </div>
            </div>
            <div class="report" id="report">
                <h3>Rapport des résultats</h3>
                <p id="report-text">Lancez une simulation pour voir les résultats expliqués !</p>
                <h4>Comment on calcule ?</h4>
                <ul>
                    <li><strong>Surface de la parabole :</strong> Aire du cercle = 3.14 × (Taille ÷ 2)²</li>
                    <li><strong>Énergie du soleil :</strong> Puissance du soleil × Surface</li>
                    <li><strong>Énergie captée :</strong> Énergie du soleil × Efficacité de la parabole</li>
                    <li><strong>Pertes de chaleur :</strong> Pertes × (Température eau - Température extérieure)</li>
                    <li><strong>Chauffage :</strong> Énergie captée × Efficacité transfert - Pertes</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Pied de page -->
    <footer>
        <p>Simulateur créé par Marco Bernardo.</p>
        <p>Code sous licence <a href="https://opensource.org/licenses/MIT">MIT</a>.</p>
        <p>Rapport explicatif sous licence <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>.</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>